<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <title>Chi ti·∫øt s·∫£n ph·∫©m</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>

<h1 id="tenSanPham"></h1>

<div class="product-detail">
    <img id="hinhSanPham" src="" alt="">
    <div>
        <p id="giaSanPham"></p>

        <p>
            S·∫£n ph·∫©m ƒë·ªì c√∫ng ch·∫•t l∆∞·ª£ng cao, ph√π h·ª£p cho th·ªù c√∫ng gia ti√™n,
            giao h√†ng nhanh t·∫°i Long S∆°n.
        </p>

        <button onclick="themVaoGio()">üõí Th√™m v√†o gi·ªè h√†ng</button>
        <br><br>
        <a href="index.html">‚¨Ö Quay l·∫°i mua h√†ng</a>
    </div>
</div>

<script>
// ====== L·∫§Y D·ªÆ LI·ªÜU T·ª™ URL ======
const params = new URLSearchParams(window.location.search);

const ten = params.get("ten");
const gia = Number(params.get("gia"));
const img = params.get("img");

// ====== KI·ªÇM TRA D·ªÆ LI·ªÜU ======
if (!ten || !gia || !img) {
    alert("Thi·∫øu th√¥ng tin s·∫£n ph·∫©m!");
    window.location.href = "index.html";
}

// ====== HI·ªÇN TH·ªä RA GIAO DI·ªÜN ======
document.getElementById("tenSanPham").innerText = ten;
document.getElementById("giaSanPham").innerText = "Gi√°: " + gia + "ƒë";
document.getElementById("hinhSanPham").src = "images/" + img;

// ====== TH√äM V√ÄO GI·ªé H√ÄNG (C√ì QTY) ======
function themVaoGio() {
    let cart = JSON.parse(localStorage.getItem("cart")) || [];

    // n·∫øu s·∫£n ph·∫©m ƒë√£ c√≥ th√¨ tƒÉng s·ªë l∆∞·ª£ng
    let found = cart.find(item => item.ten === ten);

    if (found) {
        found.qty += 1;
    } else {
        cart.push({
            ten: ten,
            gia: gia,
            qty: 1
        });
    }

    localStorage.setItem("cart", JSON.stringify(cart));

    alert(
        "ƒê√£ th√™m v√†o gi·ªè h√†ng!\n\n" +
        "B·∫°n s·∫Ω ƒë∆∞·ª£c chuy·ªÉn sang gi·ªè h√†ng ƒë·ªÉ ƒë·∫∑t qua Zalo."
    );

    window.location.href = "cart.html";
}
</script>

</body>
</html>
